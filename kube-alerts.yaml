kube-alerts:

    # â”€â”€ NODE EVENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  MemoryPressure:
    enabled: true
    notify: true
    message: "ğŸ’¢ Node under memory pressure"
    suggestion: "Investigate pods consuming too much RAM on this node"
    min_occurrences: 1
    within_minutes: 5

  DiskPressure:
    enabled: true
    notify: true
    message: "ğŸ’½ Node under disk pressure"
    suggestion: "Free up disk or expand storage on this node"
    min_occurrences: 1
    within_minutes: 5

  NotReady:
    enabled: true
    notify: true
    message: "ğŸ›‘ Node not ready"
    suggestion: "Check node status (`kubectl describe node`) and resolve readiness issues"
    min_occurrences: 1
    within_minutes: 5

  NotSchedulable:
    enabled: true
    notify: true
    message: "ğŸš« Node unschedulable"
    suggestion: "Node cordoned? Uncordon if you want pods to be scheduled here. Verify if Autoscaler wants to remove the node and why it didn't work"
    min_occurrences: 1
    within_minutes: 5

  OOM_KILLED:
    enabled: true
    notify: true
    message: "ğŸ’¥ Pod terminato per esaurimento memoria (OOMKilled)"
    suggestion: "Aumenta i limiti di memoria con `resources.limits.memory` nel workload."
    min_occurrences: 3
    within_minutes: 15

  CrashLoopBackOff:
    enabled: true
    notify: true
    message: "ğŸ”¥ CrashLoopBackOff rilevato"
    suggestion: "Controlla i log del container (`kubectl logs`) per identificare la causa del crash."
    min_occurrences: 3
    within_minutes: 15

  PROBE_FAILURE:
    enabled: true
    notify: true
    message: "âš ï¸ Probe fallita (liveness/startup)"
    suggestion: "Verifica e regola `initialDelaySeconds`, `timeoutSeconds`, `periodSeconds` nelle probe."
    min_occurrences: 25
    within_minutes: 15

  POD_DELETED:
    enabled: true
    notify: false  # Solo log, non alert
    message: "â„¹ï¸ Pod eliminato dal controller"
    suggestion: "Verifica se Ã¨ stato un aggiornamento legittimo o un restart imprevisto."
    min_occurrences: 3
    within_minutes: 15

  TERMINATION:
    enabled: true
    notify: true
    message: "ğŸ” Pod terminated (check exit code & reason)"
    exit_code: 
    suggestion: "Inspect logs / exit code to understand why container exited"
    min_occurrences: 10
    within_minutes: 15

  ImagePullBackOff:
    enabled: true
    notify: true
    message: "âŒ Impossibile scaricare l'immagine del container"
    suggestion: "Verifica il nome dell'immagine o le credenziali per il registry (imagePullSecrets)."
    min_occurrences: 3
    within_minutes: 15

  Evicted:
    enabled: true
    notify: true
    message: "ğŸ“¤ Pod sfrattato dal nodo"
    suggestion: "Controlla l'utilizzo risorse del nodo o attiva meccanismi di autoscaling."
    min_occurrences: 3
    within_minutes: 15